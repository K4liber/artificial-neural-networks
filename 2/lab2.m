pattern4 =  [-1, -1, -1, -1, -1, -1, -1; 
             -1, -1, -1, 1, 1, -1, -1;
             -1, -1, 1, -1, 1, -1, -1;
             -1, 1, -1, -1, 1, -1, -1;
             -1, 1, 1, 1, 1, 1, -1;
             -1, -1, -1, -1, 1, -1, -1;
             -1, -1, -1, -1, -1, -1, -1; 
];
pattern1 =  [-1, -1, -1, -1, -1, -1, -1; 
             -1, -1, 1, 1, -1, -1, -1; 
             -1, -1, -1, 1, -1, -1, -1; 
             -1, -1, -1, 1, -1, -1, -1; 
             -1, -1, -1, 1, -1, -1, -1; 
             -1, -1, 1, 1, 1, -1, -1; 
             -1, -1, -1, -1, -1, -1, -1; 
];
pattern2 =  [-1, -1, -1, -1, -1, -1, -1;  
             -1, 1, 1, 1, 1, 1, -1;
             -1, -1, -1, -1, -1, 1, -1; 
             -1, 1, 1, 1, 1, 1, -1; 
             -1, 1, -1, -1, -1, -1, -1; 
             -1, 1, 1, 1, 1, 1, -1; 
             -1, -1, -1, -1, -1, -1, -1; 
];
IN2 =  [1, -1, -1, 1, -1, -1, -1;  
             -1, -1, 1, 1, 1, 1, -1;
             -1, 1, -1, -1, -1, 1, -1; 
             -1, -1, 1, 1, 1, 1, -1; 
             -1, 1, -1, -1, -1, -1, -1; 
             -1, 1, -1, -1, 1, 1, -1; 
             -1, -1, -1, -1, -1, 1, -1; 
];
IN1 =  [-1, -1, -1, -1, -1, -1, 1; 
             -1, -1, 1, 1, -1, -1, -1; 
             -1, -1, -1, 1, -1, -1, -1; 
             -1, -1, 1, 1, -1, -1, -1; 
             -1, -1, -1, 1, -1, -1, -1; 
             -1, -1, 1, 1, 1, -1, -1; 
             -1, -1, -1, -1, -1, -1, -1; 
];
IN4 =  [-1, -1, -1, -1, -1, -1, -1; 
             -1, -1, -1, 1, 1, -1, -1;
             -1, 1, -1, -1, 1, -1, -1;
             -1, 1, 1, -1, 1, -1, -1;
             -1, 1, 1, 1, -1, 1, -1;
             -1, -1, -1, -1, 1, 1, -1;
             -1, -1, 1, -1, -1, -1, -1; 
];

patt4 = pattern4(:);
patt1 = pattern1(:);
patt2 = pattern2(:);
N = 7;
J = (1/N)*(patt4*patt4' + patt1*patt1' + patt2*patt2');

OUT4 = reshape(Hopfield(IN4(:), 0.09, N, J),[N, N]);
OUT1 = reshape(Hopfield(IN1(:), 0.09, N, J),[N, N]);
OUT2 = reshape(Hopfield(IN2(:), 0.09, N, J),[N, N]);

imshow([pattern4, pattern1, pattern2; IN4, IN1, IN2; OUT4, OUT1, OUT2])
%imshow(J)